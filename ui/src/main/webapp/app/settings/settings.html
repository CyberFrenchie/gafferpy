<!--
  ~ Copyright 2017 Crown Copyright
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~     http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->

<div layout-padding layout-margin>
    <div class="container">
        <div class="panelHeading">
            <h3>Settings</h3>
        </div>

        <div layout="column">
            <md-input-container>
                <label>Default result limit</label>
                <input type="number" step="1" ng-model="ctrl.resultLimit"
                       id="resultLimit" ng-blur="ctrl.updateResultLimit()">
            </md-input-container>

            <md-input-container>
                <label>Default operation</label>
                <input type="text" ng-blur="ctrl.updateDefaultOp()"
                       ng-model="ctrl.defaultOp"
                       id="defaultOp">
            </md-input-container>
        </div>

        <div class="panelHeading">
            <h4>Default Operation Options</h4>
        </div>

        <div layout="column">
            <div ng-repeat="opOption in ctrl.defaultOpOptionsArray">
                <md-input-container>
                    <label>Key</label>
                    <md-select name="opOptionKey"
                               ng-model="opOption.key"
                               required
                               aria-label="operation option key picker"
                               md-on-close="ctrl.updateDefaultOpOptions()">
                        <md-option ng-value="key"
                                   ng-repeat="(key, value) in ctrl.getOpOptionKeys(opOption)"
                                   aria-label="{{key}}">
                            <div class="md-body-2">{{key}}</div>
                        </md-option>
                    </md-select>
                </md-input-container>
                <md-input-container>
                    <label>Value</label>
                    <input type="text"
                           ng-blur="ctrl.updateDefaultOpOptions()"
                           required
                           ng-model="opOption.value"
                           id="defaultOpOptionValue">
                </md-input-container>
                <md-button class="md-icon-button md-primary"
                           ng-click="ctrl.deleteOption(opOption)"
                           aria-label="Delete operation option">
                    <md-icon md-svg-icon="add"></md-icon>
                    <md-tooltip md-direction="top">Delete option</md-tooltip>
                </md-button>
            </div>
            <div>
                <md-button class="md-primary"
                           aria-label="add operation option"
                           ng-click="ctrl.addDefaultOperationOption()">
                    Add Operation Option
                </md-button>
            </div>
        </div>
    </div>
</div>